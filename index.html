<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Permissions-Policy" content="interest-cohort=()">
    <title>My Shoping App</title>
    <link rel="icon" href="./assets/icon-192.png">
    <link rel="stylesheet" href="./index.css">
    <link rel="manifest" href="./manifest.json">

    <script src="./dexie.min.js"></script>
    <!-- <script src="https://unpkg.com/dexie/dist/dexie.js"></script>-->
    <script>
      //Chech that service walker are suppoerted
      if ('serviceWorker' in navigator) {
        //Use the window load event to keep the page load performant
        window.addEventListener('load', () => {
          //navigator.serviceWorker.getRegistrations().then(function(registrations) {
              //for(let registration of registrations) {
                  //registration.unregister();
              //} 
            //});

        
          //
          navigator.serviceWorker.register('./sw.js');
          //
          //navigator.serviceWorker.ready.then((registration) => {
            //registration.update();
          //});
          //

          let refreshing = false;
          // detect controller change and refresh the page
          navigator.serviceWorker.addEventListener('controllerchange', () => {
              if (!refreshing) {
                window.location.reload()
                refreshing = true
              }
          })


        });
      }




          

        
    </script>
</head>
<body>
    <nav>
        <p>My list</p>
      </nav>

    <div class="container">
        <form id="itemForm">
            <label>
                Name of Item:
                <input type="text" id="nameInput" required>
              </label>
      
              <label>
                Quantity:
                <input type="number" id="quantityInput" value=1>
              </label>
      
              <label>
                Price:
                <input type="number" id="priceInput" value=0>
              </label>
      
              <button type="submit" id="addItemButton">Add item</button>
            
              <div id="itemsDiv"></div>
              <div id="totalPriceDiv"></div>

        </form>
    </div>

    <script src="index.js"></script>
    
</body>
</html>